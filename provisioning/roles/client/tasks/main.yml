---
# This is a role for setting up the client.
- name: Create alias for server
  lineinfile:
    path: '/etc/hosts'
    line: '192.168.20.5 server'

- name: Install packages
  apt:
    pkg:
     - nmap
     - git
     - python3.8
     - python3-pip
     - apache2
     - net-tools
    update_cache: yes

- name: Clone 'social-engineer-toolkit'
  git:
    repo: 'https://github.com/trustedsec/social-engineer-toolkit.git'
    dest: /home/user/setoolkit/

- name: Install requirements
  shell: pip3 install -r requirements.txt
  args:
    chdir: /home/user/setoolkit/
    
- name: Run setup.py
  shell: python3 setup.py
  args:
    chdir: /home/user/setoolkit/

- name: Create directory for Metasploit
  file:
    path: "/home/user/msf"
    state: directory
    mode: "0755"

- name: Download metasploit
  get_url:
    url: https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb
    dest: /home/user/msf/msfinstall
    mode: '0755'

- name: Run msfinstall script
  shell: "./msfinstall"
  args:
    chdir: /home/user/msf

- name: Install twisted python-module
  shell: pip3 install twisted

- name: convert python 2 to 3 module
  shell: pip3 install 2to3

- name: Install sslstrip
  git:
    repo: https://github.com/moxie0/sslstrip.git
    dest: /home/user/sslstrip/

- name: convert sslstrip code py2 to py3
  shell: python3 -m 2to3 -w .
  args:
    chdir: /home/user/sslstrip/

- name: Run sslstrip
  shell: python3 setup.py install
  args:
    chdir: /home/user/sslstrip/

...
